(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{2651:function(t,e,a){},2665:function(t,e,a){"use strict";a(2651)},2674:function(t,e,a){"use strict";a(45);var n={components:{},mixins:[a(1777).a],props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},totalCount:{type:Number,default:0}},computed:{pageFooterIconClass:function(){return this.isRTLView?"margin-right-minus-slab":"margin-left-minus-slab"},isFooterVisible:function(){return this.totalCount&&!(this.firstIndex>this.totalCount)},firstIndex:function(){return this.pageSize*(this.currentPage-1)+1},lastIndex:function(){return Math.min(this.totalCount,this.pageSize*this.currentPage)},searchButtonClass:function(){return""!==this.searchQuery?"show":""},hasLastPage:function(){return!!Math.ceil(this.totalCount/this.pageSize)},hasFirstPage:function(){return 1===this.currentPage},hasNextPage:function(){return this.currentPage===Math.ceil(this.totalCount/this.pageSize)},hasPrevPage:function(){return 1===this.currentPage}},methods:{onNextPage:function(){if(!this.hasNextPage){var t=this.currentPage+1;this.onPageChange(t)}},onPrevPage:function(){if(!this.hasPrevPage){var t=this.currentPage-1;this.onPageChange(t)}},onFirstPage:function(){if(!this.hasFirstPage){this.onPageChange(1)}},onLastPage:function(){if(!this.hasLastPage){var t=Math.ceil(this.totalCount/this.pageSize);this.onPageChange(t)}},onPageChange:function(t){this.$emit("page-change",t)}}},s=(a(2665),a(5)),r=Object(s.a)(n,(function(){var t=this,e=t._self._c;return t.isFooterVisible?e("footer",{staticClass:"bg-white dark:bg-slate-800 h-[60px] border-t border-solid border-slate-75 dark:border-slate-700/50 flex items-center justify-between py-0 px-4"},[e("div",{staticClass:"left-aligned-wrap"},[e("div",{staticClass:"text-xs text-slate-600 dark:text-slate-200"},[e("strong",[t._v(t._s(t.firstIndex))]),t._v("\n      - "),e("strong",[t._v(t._s(t.lastIndex))]),t._v(" of\n      "),e("strong",[t._v(t._s(t.totalCount))]),t._v(" items\n    ")])]),t._v(" "),e("div",{staticClass:"right-aligned-wrap"},[t.totalCount?e("div",{staticClass:"primary button-group pagination-button-group"},[e("woot-button",{attrs:{size:"small",variant:"smooth","color-scheme":"secondary","class-names":"goto-first","is-disabled":t.hasFirstPage},on:{click:t.onFirstPage}},[e("fluent-icon",{attrs:{icon:"chevron-left",size:"18"}}),t._v(" "),e("fluent-icon",{class:t.pageFooterIconClass,attrs:{icon:"chevron-left",size:"18"}})],1),t._v(" "),e("woot-button",{attrs:{size:"small",variant:"smooth","color-scheme":"secondary","is-disabled":t.hasPrevPage},on:{click:t.onPrevPage}},[e("fluent-icon",{attrs:{icon:"chevron-left",size:"18"}})],1),t._v(" "),e("woot-button",{attrs:{size:"small",variant:"smooth","color-scheme":"secondary"},on:{click:function(t){t.preventDefault()}}},[t._v("\n        "+t._s(t.currentPage)+"\n      ")]),t._v(" "),e("woot-button",{attrs:{size:"small",variant:"smooth","color-scheme":"secondary","is-disabled":t.hasNextPage},on:{click:t.onNextPage}},[e("fluent-icon",{attrs:{icon:"chevron-right",size:"18"}})],1),t._v(" "),e("woot-button",{attrs:{size:"small",variant:"smooth","color-scheme":"secondary","class-names":"goto-last","is-disabled":t.hasLastPage},on:{click:t.onLastPage}},[e("fluent-icon",{attrs:{icon:"chevron-right",size:"18"}}),t._v(" "),e("fluent-icon",{class:t.pageFooterIconClass,attrs:{icon:"chevron-right",size:"18"}})],1)],1):t._e()])]):t._e()}),[],!1,null,"0bdf6a88",null);e.a=r.exports},3378:function(t,e,a){"use strict";a.r(e);a(41),a(10),a(4),a(8),a(11),a(9),a(12);var n=a(25),s=a(2674),r=a(1914),i=a(79),o=(a(141),a(37),a(16),a(7),a(21),{0:"agent",1:"administrator"}),u={0:"online",1:"offline",2:"busy"},c={"automationrule:create":"AUDIT_LOGS.AUTOMATION_RULE.ADD","automationrule:update":"AUDIT_LOGS.AUTOMATION_RULE.EDIT","automationrule:destroy":"AUDIT_LOGS.AUTOMATION_RULE.DELETE","webhook:create":"AUDIT_LOGS.WEBHOOK.ADD","webhook:update":"AUDIT_LOGS.WEBHOOK.EDIT","webhook:destroy":"AUDIT_LOGS.WEBHOOK.DELETE","inbox:create":"AUDIT_LOGS.INBOX.ADD","inbox:update":"AUDIT_LOGS.INBOX.EDIT","inbox:destroy":"AUDIT_LOGS.INBOX.DELETE","user:sign_in":"AUDIT_LOGS.USER_ACTION.SIGN_IN","user:sign_out":"AUDIT_LOGS.USER_ACTION.SIGN_OUT","team:create":"AUDIT_LOGS.TEAM.ADD","team:update":"AUDIT_LOGS.TEAM.EDIT","team:destroy":"AUDIT_LOGS.TEAM.DELETE","macro:create":"AUDIT_LOGS.MACRO.ADD","macro:update":"AUDIT_LOGS.MACRO.EDIT","macro:destroy":"AUDIT_LOGS.MACRO.DELETE","accountuser:create":"AUDIT_LOGS.ACCOUNT_USER.ADD","accountuser:update:self":"AUDIT_LOGS.ACCOUNT_USER.EDIT.SELF","accountuser:update:other":"AUDIT_LOGS.ACCOUNT_USER.EDIT.OTHER","inboxmember:create":"AUDIT_LOGS.INBOX_MEMBER.ADD","inboxmember:destroy":"AUDIT_LOGS.INBOX_MEMBER.REMOVE","teammember:create":"AUDIT_LOGS.TEAM_MEMBER.ADD","teammember:destroy":"AUDIT_LOGS.TEAM_MEMBER.REMOVE","account:update":"AUDIT_LOGS.ACCOUNT.EDIT"};function l(t){return Array.isArray(t)?t[t.length-1]:t}function g(t,e){var a;return null===t?"System":(null===(a=e.find((function(e){return e.id===t})))||void 0===a?void 0:a.name)||t}function d(t,e,a){t.user_id!==t.auditable.user_id&&(e.user=g(t.auditable.user_id,a));var n,s,r,i=(n=t.audited_changes,s=[],r=[],n.role&&n.role.length&&(s.push("role"),r.push(o[l(n.role)])),n.availability&&n.availability.length&&(s.push("availability"),r.push(u[l(n.availability)])),{changes:s,values:r});return i&&(e.attributes=i.changes,e.values=i.values),e}function h(t,e,a){return t.audited_changes&&(e=function(t,e,a){var n=t.audited_changes.user_id;return n&&void 0!==n&&(e.user=g(n,a)),e}(t,e,a),e=function(t,e){return t.audited_changes.team_id&&(e.team_id=t.audited_changes.team_id),e}(t,e),e=function(t,e){return t.audited_changes.inbox_id&&(e.inbox_id=t.audited_changes.inbox_id),e}(t,e)),e}function _(t,e,a,n){return"create"===n?function(t,e,a){e.invitee=g(t.audited_changes.user_id,a);var n=t.audited_changes.role;return e.role=o[n]||"unknown",e}(t,e,a):"update"===n?d(t,e,a):e}function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function v(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m={components:{TableFooter:s.a},mixins:[i.a,r.a],beforeRouteEnter:function(t,e,a){a((function(t){t.fetchAuditLogs()}))},data:function(){return{loading:{},auditLogsAPI:{message:""}}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){v(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(n.mapGetters)({records:"auditlogs/getAuditLogs",uiFlags:"auditlogs/getUIFlags",meta:"auditlogs/getMeta",agentList:"agents/getAgents"})),mounted:function(){this.$store.dispatch("agents/get")},methods:{fetchAuditLogs:function(){var t,e=this,a=null!==(t=this.$route.query.page)&&void 0!==t?t:1;this.$store.dispatch("auditlogs/fetch",{page:a}).catch((function(t){var a=(null===t||void 0===t?void 0:t.message)||e.$t("AUDIT_LOGS.API.ERROR_MESSAGE");e.showAlert(a)}))},generateLogText:function(t){var e=function(t,e){var a={agentName:g(t.user_id,e),id:t.auditable_id},n=t.auditable_type.toLowerCase(),s=t.action.toLowerCase();return"accountuser"===n&&(a=_(t,a,e,s)),"inboxmember"!==n&&"teammember"!==n||(a=h(t,a,e)),a}(t,this.agentList),a=function(t){var e=t.auditable_type.toLowerCase(),a=t.action.toLowerCase(),n="".concat(e,":").concat(a);return"accountuser"===e&&"update"===a&&(n+=t.user_id===t.auditable.user_id?":self":":other"),c[n]||""}(t);return this.$t(a,e)},onPageChange:function(t){window.history.pushState({},null,"".concat(this.$route.path,"?page=").concat(t));try{this.$store.dispatch("auditlogs/fetch",{page:t})}catch(a){var e=(null===a||void 0===a?void 0:a.message)||this.$t("AUDIT_LOGS.API.ERROR_MESSAGE");this.showAlert(e)}}}},b=m,p=a(5),O=Object(p.a)(b,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 overflow-auto p-4 flex justify-between flex-col"},[e("div",[e("div",[t.uiFlags.fetchingList||t.records.length?t._e():e("p",{staticClass:"flex h-full items-center flex-col justify-center"},[t._v("\n        "+t._s(t.$t("AUDIT_LOGS.LIST.404"))+"\n      ")]),t._v(" "),t.uiFlags.fetchingList?e("woot-loading-state",{attrs:{message:t.$t("AUDIT_LOGS.LOADING")}}):t._e(),t._v(" "),!t.uiFlags.fetchingList&&t.records.length?e("table",{staticClass:"woot-table w-full"},[t._m(0),t._v(" "),e("thead",t._l(t.$t("AUDIT_LOGS.LIST.TABLE_HEADER"),(function(a){return e("th",{key:a},[t._v("\n            "+t._s(a)+"\n          ")])})),0),t._v(" "),e("tbody",t._l(t.records,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"whitespace-nowrap break-all"},[t._v("\n              "+t._s(t.generateLogText(a))+"\n            ")]),t._v(" "),e("td",{staticClass:"whitespace-nowrap break-all"},[t._v("\n              "+t._s(t.messageTimestamp(a.created_at,"MMM dd, yyyy hh:mm a"))+"\n            ")]),t._v(" "),e("td",{staticClass:"w-[8.75rem]"},[t._v("\n              "+t._s(a.remote_address)+"\n            ")])])})),0)]):t._e()],1)]),t._v(" "),e("table-footer",{staticClass:"dark:bg-slate-900",attrs:{"current-page":Number(t.meta.currentPage),"total-count":t.meta.totalEntries,"page-size":t.meta.perPage},on:{"page-change":t.onPageChange}})],1)}),[function(){var t=this,e=t._self._c;return e("colgroup",[e("col",{staticClass:"w-[60%]"}),t._v(" "),e("col"),t._v(" "),e("col")])}],!1,null,null,null);e.default=O.exports}}]);
//# sourceMappingURL=82-0003d589655016926c74.chunk.js.map